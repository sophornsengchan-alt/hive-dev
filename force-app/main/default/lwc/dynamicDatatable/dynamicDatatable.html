<template>
    <article class="slds-card">
        <div class="slds-card__header slds-grid">
            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                <div class="slds-media__figure">
                    <lightning-icon icon-name={headerIcon} size="small"></lightning-icon>
                </div>
                <div class="slds-media__body">
                    <h2 class="slds-card__header-title">
                        <span>{headerTitle}</span>
                    </h2>
                </div>
                <slot name="quickAction">
                
                </slot>
                
            </header>
        </div>
        <!-- <div class="slds-card__body" style={tableHeightStyle}> -->
        <div class="slds-card__body">
            <template if:true={hasRecord}>
                <div class="slds-grid slds-grid_vertical-align-center slds-grid_align-spread">
                    <div class="slds-col" if:true={showPagination}><!--RECORDS PER PAGE-->
                        <div class="slds-list_inline slds-p-bottom_xx-small customSelect">
                            <label class="slds-text-color_weak slds-p-horizontal_x-small" for="recordsPerPage">Page
                                Size:</label>
                            <div class="slds-select_container">
                                <select class="slds-select" id="recordsPerPage" onchange={handleRecordsPerPage}>
                                    <template for:each={pageSizeOptions} for:item="option">
                                        <option key={option} value={option}>{option}</option>
                                    </template>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="slds-col" if:true={showSearchBox}><!--Search Box to Seach in Columns-->
                        <div>
                            <div class="slds-p-horizontal_x-small slds-p-bottom_xx-small">
                                <lightning-input label="" type="search" placeholder="Search" variant="label-hidden"
                                    onchange={handleKeyChange}></lightning-input>
                            </div>
                        </div>
                    </div>
                </div>
        
                <!-- <div class="slds-grid slds-grid_vertical-align-center slds-grid_align-spread"> -->
                    <div class="slds-col" style={tableHeightStyle}>
                        <lightning-datatable key-field={keyField} data={recordsToDisplay} columns={columns}
                            default-sort-direction={defaultSortDirection} sorted-direction={sortDirection} sorted-by={sortedBy}
                            onsort={handelSort} hide-checkbox-column="true" resize-column-disabled>
                        </lightning-datatable>
                    </div>
                <!-- </div> -->
        
                <div class="slds-grid slds-grid_vertical-align-center slds-grid_align-spread">
                    <div class="slds-col"></div>
                    <div class="slds-col"></div>
                    <!--PAGE NAVIGATION-->
                    <div class="slds-col" if:true={showPagination}>
                        <div>
                            <div class="slds-col slds-p-bottom_xx-small">
                                <span>
                                    <lightning-button-icon icon-name="utility:chevronleft" variant="bare" size="medium"
                                        alternative-text="Previous Page" onclick={previousPage}></lightning-button-icon>
                                </span>
                                <label class="slds-text-color_weak slds-p-horizontal_x-small" for="pageNum">Page:</label>
                                <input type="number" id="pageNum" value={pageNumber} maxlength="4"
                                    onkeypress={handlePageNumberChange} class="customInput" title="Go to a Page"></input>
                                <span>&nbsp;of&nbsp;<b id="totalPages">{totalPages}</b></span>
                                <span>
                                    <template if:true={pageNumber}></template>
                                    <lightning-button-icon icon-name="utility:chevronright" variant="bare" size="medium"
                                        alternative-text="Next Page" onclick={nextPage}
                                        class="slds-p-horizontal_x-small"></lightning-button-icon>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
            <template if:false={hasRecord}>
                <slot name="noRecord">
                
                </slot>
            </template>
        </div>
        <slot name="cardFooter">
            
        </slot>
    </article>
    
</template>